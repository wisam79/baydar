<Window x:Class="Beidar.UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        xmlns:local="clr-namespace:Beidar.UI"
        xmlns:vm="clr-namespace:Beidar.UI.ViewModels"
        mc:Ignorable="d"
        Title="{DynamicResource App_Title}" Height="768" Width="1024"
        WindowStartupLocation="CenterScreen"
        ui:TitleBar.ExtendViewIntoTitleBar="True"
        Style="{StaticResource DefaultWindowStyle}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Custom Title Bar -->
        <Grid x:Name="AppTitleBar" Height="32">
             <Grid.ColumnDefinitions>
                 <ColumnDefinition Width="Auto"/>
                 <ColumnDefinition Width="*"/>
                 <ColumnDefinition Width="Auto"/>
                 <ColumnDefinition Width="140"/> <!-- Reserve space for Caption Buttons -->
             </Grid.ColumnDefinitions>

             <TextBlock Grid.Column="0" 
                        Text="{DynamicResource App_Title}" 
                        VerticalAlignment="Center" 
                        Margin="16,0,16,0" 
                        Style="{StaticResource CaptionTextBlockStyle}"/>

             <!-- Language Switcher -->
             <ComboBox Grid.Column="2" 
                       Width="100" 
                       VerticalAlignment="Center" 
                       SelectedIndex="0"
                       SelectionChanged="Language_SelectionChanged">
                 <ComboBoxItem Content="English" Tag="en"/>
                 <ComboBoxItem Content="العربية" Tag="ar"/>
             </ComboBox>
        </Grid>

        <ui:NavigationView Grid.Row="1" 
                           x:Name="NavView" 
                           IsSettingsVisible="True"
                           PaneDisplayMode="Left"
                           SelectionChanged="NavView_SelectionChanged">
            <ui:NavigationView.MenuItems>
                <ui:NavigationViewItem Content="{DynamicResource Nav_Dashboard}" Icon="Home" Tag="Dashboard" IsSelected="True" />
                <ui:NavigationViewItem Content="{DynamicResource Nav_Sales}" Icon="Shop" Tag="Sales" />
                <ui:NavigationViewItem Content="{DynamicResource Nav_Products}" Icon="Library" Tag="Products" />
                <ui:NavigationViewItem Content="{DynamicResource Nav_Inventory}" Icon="AllApps" Tag="Inventory" />
                <ui:NavigationViewItem Content="{DynamicResource Nav_Customers}" Icon="Contact" Tag="Customers" />
                <ui:NavigationViewItem Content="{DynamicResource Nav_Reports}" Icon="Document" Tag="Reports" />
            </ui:NavigationView.MenuItems>
            
            <!-- Main Content Area -->
            <ContentControl Content="{Binding CurrentView}" Margin="20"/>
            
        </ui:NavigationView>
    </Grid>
</Window>